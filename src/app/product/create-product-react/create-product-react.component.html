<h2>Create Product Form</h2>

<div *ngIf="message">{{message}}</div>

<div class="form-group">
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
  <div class="product-id">
        Product Id:
        <input type="number" 
               placeholder="Product Id" 
               name="productId" 
               formControlName="id">
  </div>
  <div *ngIf="id.invalid && (formSubmitted || id.dirty || id.touched)">
      <div *ngIf="id.errors.required">
        Id is required
      </div>
  </div>

  <div class="product-name">
    Product Name:
    <input type="text" 
           placeholder="Product Name" 
           name="productName" 
           formControlName="name">
  </div>
  <div *ngIf="name.invalid && (formSubmitted || name.dirty || name.touched)">
      <div *ngIf="name.errors.required">
        Name is required
      </div>
      <div *ngIf="name.errors.minlength">
        Name must be at least 2 characters
      </div>
  </div>

  <div class="product-price">
      Product Price:
      <input type="number" 
             placeholder="Product Price" 
             name="productPrice" 
             formControlName="price">
    </div>
    <div *ngIf="price.invalid && (formSubmitted || price.dirty || price.touched)">
      <div *ngIf="price.errors.required">
        Price is required
      </div>
      <div *ngIf="price.errors.min">
        Price must be at least 0
      </div>
    </div>

    <div class="product-image-url">
        Product Image Path:
        <input type="text" 
               placeholder="Product Image URL" 
               name="productImage" 
               formControlName="imagePath">
    </div>
    <div *ngIf="imagePath.invalid && (formSubmitted || imagePath.dirty || imagePath.touched)">
      <div *ngIf="imagePath.errors.required">
        Price is required
      </div>
    </div>

    <div class="product-on-sale">
        <input type="checkbox"
               name="productOnSale" 
               formControlName="onSale">
               On Sale
    </div>

  <button (click)="onSubmit()">Submit</button>
  <button type="button" (click)="resetForm()">
    Reset
  </button>
  <button type="button" (click)="loadStockFromServer()">
    Simulate Stock Load from Server
  </button>
  <button type="button" (click)="patchStockForm()">
    Patch Stock Form
  </button>
</form>
</div>
<p>Form Control value: {{ productForm.value | json }}</p>
<p>Form Control status: {{ productForm.status | json }}</p>